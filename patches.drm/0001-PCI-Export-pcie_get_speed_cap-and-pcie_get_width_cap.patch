From 576c7218a1546e0153480b208b125509cec71470 Mon Sep 17 00:00:00 2001
From: Alex Deucher <alexander.deucher@amd.com>
Date: Mon, 25 Jun 2018 13:17:41 -0500
Subject: PCI: Export pcie_get_speed_cap and pcie_get_width_cap
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Git-commit: 576c7218a1546e0153480b208b125509cec71470
Patch-mainline: v4.19-rc1
References: FATE#326289

So drivers can use them.  This can be used to replace
duplicate code in the drm subsystem.

Acked-by: Christian KÃ¶nig <christian.koenig@amd.com>
Acked-by: Bjorn Helgaas <bhelgaas@google.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Acked-by: Thomas Zimmermann <tzimmermann@suse.de>
---
 drivers/pci/pci.c   |    2 ++
 include/linux/pci.h |    3 +++
 2 files changed, 5 insertions(+)

--- a/drivers/pci/pci.c
+++ b/drivers/pci/pci.c
@@ -5181,6 +5181,7 @@ enum pci_bus_speed pcie_get_speed_cap(st
 
 	return PCI_SPEED_UNKNOWN;
 }
+EXPORT_SYMBOL(pcie_get_speed_cap);
 
 /**
  * pcie_get_width_cap - query for the PCI device's link width capability
@@ -5199,6 +5200,7 @@ enum pcie_link_width pcie_get_width_cap(
 
 	return PCIE_LNK_WIDTH_UNKNOWN;
 }
+EXPORT_SYMBOL(pcie_get_width_cap);
 
 /**
  * pcie_bandwidth_capable - calculate a PCI device's link bandwidth capability
--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -262,6 +262,9 @@ enum pci_bus_speed {
 	PCI_SPEED_UNKNOWN		= 0xff,
 };
 
+enum pci_bus_speed pcie_get_speed_cap(struct pci_dev *dev);
+enum pcie_link_width pcie_get_width_cap(struct pci_dev *dev);
+
 struct pci_cap_saved_data {
 	u16 cap_nr;
 	bool cap_extended;
