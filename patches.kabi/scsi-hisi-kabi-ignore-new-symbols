From: Lee Duncan <lduncan@suse.com>
Date: Fri May 31 06:28:04 PDT 2019
Subject: scsi: hisi: KABI ignore new symbols
Patch-mainline: never, kabi
References: bsc#1135038

Upstream commit:

c63b88ccff0a scsi: hisi_sas: Fix for setting the PHY linkrate when disconnected

added a field to hisi_sas_phy, and commits

ffb1c820b8b6 scsi: hisi_sas: remove the check of sas_dev status in hisi_sas_I_T_nexus_reset()
57dbb2b218eb scsi: hisi_sas: Send HARD RESET to clear the previous affiliation of STP target port

modified the dev_status field of hisi_sas_device from a u8 to
an enum. Both of these changes are will only affect the updated
hisi_sas driver, so make them so the KABI checker allows them.

Signed-off-by: Lee Duncan <lduncan@suse.com>
---
---
 drivers/scsi/hisi_sas/hisi_sas.h |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

--- a/drivers/scsi/hisi_sas/hisi_sas.h
+++ b/drivers/scsi/hisi_sas/hisi_sas.h
@@ -170,7 +170,9 @@ struct hisi_sas_phy {
 	u32		code_violation_err_count;
 	enum sas_linkrate	minimum_linkrate;
 	enum sas_linkrate	maximum_linkrate;
+#ifndef	__GENKSYMS__
 	int enable;
+#endif
 };
 
 struct hisi_sas_port {
@@ -202,9 +204,13 @@ struct hisi_sas_device {
 	struct hisi_sas_dq	*dq;
 	struct list_head	list;
 	enum sas_device_type	dev_type;
-	enum dev_status dev_status;
 	int device_id;
 	int sata_idx;
+#ifndef	__GENKSYMS__
+	enum dev_status dev_status;
+#else
+	u8 dev_status;
+#endif
 	spinlock_t lock; /* For protecting slots */
 };
 
