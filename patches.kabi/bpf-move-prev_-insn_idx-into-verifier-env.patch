From: Gary Lin <glin@suse.com>
Subject: [PATCH] kabi: ignore struct bpf_verifier_env change
Patch-mainline: No, SUSE-specific
References: bsc#1068032 CVE-2017-5753

[js] bpf_reg_state and bpf_verifier_env can (and are) used from NIC
drivers. And you added members to the middle. Why is this correct?

Signed-off-by: Gary Lin <glin@suse.com>
---
 include/linux/bpf_verifier.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/linux/bpf_verifier.h
+++ b/include/linux/bpf_verifier.h
@@ -169,8 +169,10 @@ struct bpf_ext_analyzer_ops {
  * one verifier_env per bpf_check() call
  */
 struct bpf_verifier_env {
+#ifndef __GENKSYMS__
 	u32 insn_idx;
 	u32 prev_insn_idx;
+#endif
 	struct bpf_prog *prog;		/* eBPF program being verified */
 	const struct bpf_verifier_ops *ops;
 	struct bpf_verifier_stack_elem *head; /* stack of verifier states to be processed */
